<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web Serv Tester</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="cookie-banner" class="cookie-banner">
        <p>Este sitio usa cookies para mejorar tu experiencia. ¿Aceptas las cookies?</p>
        <button id="accept-cookies">Aceptar</button>
        <button id="reject-cookies">Rechazar</button>
    </div>

    <!-- Top black bar -->
    <header class="top-bar">
        <h1 class="title">Web Serv Tester</h1>
    </header>

    <main class="container">
        <h1>webserv feature tester.</h1>
        <div class="buttons">
            <button onclick="window.location.href='upload/upload.html'">Test POST (File Upload)</button>
            <button onclick="window.location.href='login/login.html'">Test CGI (Log In) </button>
            <button onclick="window.location.href='delete/delete.html'">Test DELETE (Delete File)</button>
            <button onclick="window.location.href='redirection/redirection.html'">Test Redirection</button>
            <button onclick="window.location.href='error_pages/error_pages.html'">Test Error Pages</button>
            <button onclick="window.location.href='test-autoindex'">Test Auto Index</button>
            <button onclick="window.location.href='test-head/head.html'">Test HEAD</button>
        </div>
    </main>
</body>

    <script>
    const cookiesAllowed = localStorage.getItem("cookiesAccepted") === "true";

    fetch("/", {
        headers: { "X-Cookies-Allowed": cookiesAllowed ? "true" : "false" }
    });

    document.addEventListener("DOMContentLoaded", function() {
    if (!localStorage.getItem("cookiesAccepted")) {
        document.getElementById("cookie-banner").style.display = "block";
    }

    document.getElementById("accept-cookies").onclick = function() {
        localStorage.setItem("cookiesAccepted", "true");
        document.getElementById("cookie-banner").style.display = "none";
    };

    document.getElementById("reject-cookies").onclick = function() {
        alert("No podrás iniciar sesión ni mantener tu sesión activa sin cookies.");
        document.getElementById("cookie-banner").style.display = "none";
    };
    });
    </script>
    </script>

</html>

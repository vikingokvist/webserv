# Start of first server block
server {
    listen 127.0.0.1:9999;
    listen 127.0.0.1:9998;                         # Bind to this IP and port
    server_name localhost;                        # Accept requests for these hostnames

    client_max_body_size 2M;     
    error_page 403 /errors/403.html                  # Limit on request body size (e.g. file uploads)
    error_page 404 /errors/404.html;               # Custom error page for 404
    error_page 500 /errors/500.html;               # Custom error page for 500

    # Root route (homepage or general path)
    location / {
        root www/;                             # Base path to serve files from
        index index.html style.css;                       # Default file if directory is requested
        methods GET POST;                          # Accepted HTTP methods
        autoindex on;                             # Do not list directory contents
    }

    location /index {
        root www/;                                  # Base path to serve files from
        index index.html;                          # Default file if directory is requested
        methods GET POST;                          # Accepted HTTP methods
        autoindex off;                             # Do not list directory contents
    }  

    location /formulario {
        root www2/;                                  # Base path to serve files from
        index formulario.html;                          # Default file if directory is requested
        methods GET POST;                          # Accepted HTTP methods
        autoindex off;                             # Do not list directory contents
    }    

    # Static image folder
    location /images {
        root /var/www/images;                      # Serve static images from this path
        autoindex on;                              # Allow directory listing if no index
    }

    # Redirection
    location /redirect {
        return 301 http://example.com;             # Redirect to another URL
    }

    # File upload path
    location /upload {
        root /var/www/uploads;                     # Serve uploaded files from here
        methods POST;                              # Only allow POST method
        upload_store /var/www/uploads;             # Directory to store uploaded files
    }

    # CGI script execution for .py
    location /cgi {
        root /var/www/cgi;                         # Serve from this base path
        methods GET POST;                          # Allow CGI scripts to receive GET/POST
        cgi_ext .py;                               # Run .py files as CGI scripts
    }

    location /test {
        root www3/;                  # The folder you want to list
        index index.html indox.html lol.html;             # Default index (can be missing to trigger autoindex)
        methods GET;                  # Allow GET requests
        autoindex on;                 # Enable directory listing
    }
}

server {
    listen 127.0.0.1:9997;  
    listen 127.0.0.1:9996;                      # Bind to this IP and port
    server_name localhost;                        # Accept requests for these hostnames

    client_max_body_size 2M;     
    error_page 403 /errors/403.html                  # Limit on request body size (e.g. file uploads)
    error_page 404 /errors/404.html;               # Custom error page for 404
    error_page 500 /errors/500.html;               # Custom error page for 500

    # Root route (homepage or general path)
    location / {
        root www/;                             # Base path to serve files from
        index index.html style.css;                       # Default file if directory is requested
        methods GET POST;                          # Accepted HTTP methods
        autoindex on;                             # Do not list directory contents
    }

    location /index {
        root www/;                                  # Base path to serve files from
        index index.html;                          # Default file if directory is requested
        methods GET POST;                          # Accepted HTTP methods
        autoindex off;                             # Do not list directory contents
    }

    location /upload {
        root fotos/;
        index form.html;
        methods GET POST;  
    }

    location /nube {
        root test1/;
        index upload.html;
        methods GET POST;
    }
}